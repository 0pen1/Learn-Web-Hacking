WAF
========================================

简介
----------------------------------------
WAF（Web Application Firewall，Web应用防火墙）是通过执行一系列针对HTTP/HTTPS的安全策略来专门为Web应用提供加固的产品。

常见功能
----------------------------------------
- 检测异常协议，拒绝不符合HTTP标准的请求
- 白名单，适用于稳定的Web应用
- 黑名单，适合处理已知问题
- 对状态管理进行会话保护
- Cookies保护
- 信息泄露保护

扫描器防御
----------------------------------------
- 基于User-Agent识别
- 基于攻击载荷识别
- 验证码

绕过方式
----------------------------------------

基于架构的绕过
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 站点在WAF后，但是站点可直连
- 站点在云服务器中，对同网段服务器无WAF

基于资源的绕过
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 使用消耗大的载荷，耗尽WAF的计算资源

基于解析的绕过
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 字符集解析不同
- 协议覆盖不全
- 协议解析不正确
- WAF解析与Web服务解析不一致

基于规则的绕过
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 等价替换
    - 大小写
    - 字符编码
        - URL编码
        - 十六进制编码
        - Unicode解析
    - 等价函数
    - 等价变量
    - 关键字拆分
- 特殊符号
    - 注释符
    - 引号（反引号、单引号、双引号）
- 利用服务本身特点

参考链接
----------------------------------------
- `WAF攻防研究之四个层次Bypass WAF <https://www.weibo.com/ttarticle/p/show?id=2309404007261092631700&sudaref=www.google.com.hk&display=0&retcode=6102>`_
