渗透测试大纲
================================

基础信息收集
--------------------------------

- 域名
    - whoisc
    - 子域名收集
        - 利用第三方查询
            - DNSDumpster
            - Virustotal
            - CrtSearch
            - threatminer
        - 爆破
        - PassiveDNS
        - 利用兄弟域名查询流程
            - 查询域名注册邮箱
            - 通过域名查询备案号
            - 通过备案号查询域名
            - 反查注册邮箱
            - 反查注册人
            - 通过注册人查询到的域名在查询邮箱
            - 通过上一步邮箱去查询域名
            - 查询以上获取出的域名的子域名
        - 利用域传送漏洞
    - 若目标使用cdn，绕过cdn找到ip

- 搜索引擎
    - Google
    - Bing
    - Yahoo
    - Baidu

- 社工
    - Git
        - Github
        - Gitchina
        - Gitlab
        - BitBucket

- 企业邮箱
    - 弱密码爆破

站点信息收集
--------------------------------

- 敏感文件
    - robots.txt
    - crossdomain.xml
    - sitemap.xml
    - 等

- 确定网站采用的语言、框架、第三方库
    - 查看源代码
    - 找后缀，比如php/asp/jsp
    - 看header里面有没有隐藏信息

- 探测有没有WAF，如果有，什么类型的
    - 如果有WAF，先想怎么绕过
    - 没有，进入下一步

- 扫描敏感目录，看是否存在信息泄漏
    - 扫描之前先自己尝试几个的url，人为看看反应

- nmap扫端口

- 拿到一定信息后，通过拿到的目录名称,文件名称及文件扩展名.了解网站开发人员的命名思路,确定其命名规则,推测出更多的目录及文件名


进一步扫描
--------------------------------

利用公共信息,如搜索引擎,站点快照信息,以及其网站所使用的程序开发商公布的一些使用文档等信息近一步获取目标站点更多信息.

一些搜索技巧如:

    - site:www.hao123.com  (返回此目标站点被搜索引擎抓取收录的所有内容)
    - site:www.hao123.com  关键词  (返回此目标站点被搜索引擎抓取收录的包含此关键词的所有页面.此处我们可以将关键词设定为,网站后台,管理后台,密码修改,密码找回等.)
    - site:www.hao123.com inurl:admin.php  (返回目标站点的地址中包含admin.php的所有页面,可以使用admin.php,manage.php或者其他关键词来寻找关键功能页面)
    - link:www.hao123.com  (返回所有包含目标站点链接的页面,其中包括其开发人员的个人博客,开发日志,或者开放这个站点的第三方公司,合作伙伴等)
    - related:www.hao123.com  (返回所有与目标站点”相似”的页面,可能会包含一些通用程序的信息等.)

- 从搜索引擎的快照中寻找一些关键信息,如程序报错信息可以会泄漏网站具体路径,或者一些快照中会保存一些测试用的测试信息,比如说某个网站在开发了后台功能模块的时候,还没给所有页面增加权限鉴别,此时被搜索引擎抓取了快照,即使后来网站增加了权限鉴别,但搜索引擎的快照中仍会保留这些信息.

- 通过搜索引擎获取目标站点的子域名,得到更多的功能,如有些网站经常使用admin 这个子域名作为其管理后台,如admin.hao123.com等.

收集网站开发者信息
--------------------------------

如网站的开发人员,管理维护人员的信息.

- 列出网站中得到的所有开发及维护人员的姓名和邮件地址及其他联系方式,其中包含从网站联系功能中获取到的,从HTML或JS中的注释信息中得到的,已经内容页面上获取到的。

- 使用上面介绍的一些高级搜索技巧,查找这些人在互联网上发布的与目标站点有关的一切信息,分析并发现有用的信息
